<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Mesocosmico Recipe Maker</title>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/snap.svg/0.3.0/snap.svg-min.js"> </script>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
	<link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/pure-min.css">
	<style>
		#svg{
			width:1440px;
			height:1000px;	
		}
		.object	{
			fill: blue;
		}

		.canvas{
			background-color :red;
			color:blue;
		}
		.text{
			fill:RGBA(199, 104, 202, 1);
		}
	</style>
	<script>
		var params = {
			"icon_viewbox" : "0 0 128 128",
			"w" : 1440,
			"h" : 1000,
			"class":"canvas",
		}
		
		var text;
		var defaultViewBox ="0 0 128 128";
		var wid
		categories = {}
			var icons = {}

		var s,scope; 
		$( document ).ready(function(){
			s = Snap("#svg");	
			// s = Snap(params["w"],params["h"]);
			s.addClass(params["class"])
			text = s.text(0, 0, "IAJDNFKJDNFKJSdflkmsdlkfmdslkfmsdls");
			text.attr({
				'x': 0,
				'y' : 150,
				'font-size': 200,
				"class":"text"
			});

			textBox = text.node.getBBox()
			// height: 230width: 3700.390625x: 1000y: -184
			
			console.log(text.node);
			console.log(text.node.textLength.baseVal.value);
			var l = text.node.textLength.baseVal.value
			
			var ids =['0102','0103','0104','0105','0106','0201','0202','0203']
			var idx = 0;

			
			function getRandomInt(min, max) {
				  return Math.floor(Math.random() * (max - min)) + min;
			}
			
			Snap.load("http://localhost:3000/getsvg?"+ids[idx],loadIcon);
			
			function loadIcon(loadedFragment){

				s.append( loadedFragment );
				elId = "#Layer";
				console.log(ids[idx]);
				elId += ids[idx].replace(/0/g,"_");
				// console.log(loadedFragment.node.)
				x = getRandomInt(0,1000) + 256; 
				console.log(x.toString());
				var el = s.select(elId);
				// el.attr({
				// 		x:  x.toString(),
				// 		y: x.toString(),
				// 		class:"test"
				// });	
				
				icons[elId] = el;
				console.log(icons);
				
				if(idx < ids.length-1){
					idx = idx +1 ;
					Snap.load("http://localhost:3000/getsvg?"+ids[idx],loadIcon)	

				}
			}
		});
		function getRandomInt(min, max) {
		  return Math.floor(Math.random() * (max - min)) + min;
		}
		// icons = []
		
		function loadSvg(){
			icons = [];
			var request = $.ajax({
				type: "GET",
				url: "/getsvg",
				data:JSON.stringify({"id":id}),
				dataType: 'JSON',
				contentType: 'application/json' 
				})
				.done(function(data) {
					console.log( "success" );
					$( ".products" ).show();
					loadOptions(data);

				})
				.fail(function(error) {
					console.log( error );
				})

		}
	</script>
</head>


<body>
<svg id="svg">

</svg>
<!-- <button type="button" onclick="loadSvg()" class="pure-button pure-button-primary pure-u-3-3">Get Arms Categories</button>	 -->
	
</body>
</html>
