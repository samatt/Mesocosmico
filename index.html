<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Mesocosmico Recipe Maker</title>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
	<script>

	function loadResults(dataString){
		data = 	dataString.split(",")
		html ="";
		$("#results").empty();
		for (var i = 0; i < data.length; i++) {
				// console.log(data[i]);
				if(i !== 0){
					html+="<p>"+data[i]+"</p>"	
				}
				
		};
		$("#results").append(html);
	}

	function getProducts(source, dest) {
		// var path = "https://atlas.media.mit.edu/hs/export/2010/"+source+"/"+dest+"/show/"
		var path = "https://localhost:3000/test"
		// var content = JSON.stringify(data);				// convert JSON obj to string
			
		var request = $.ajax({
			type: "POST",
			url: "/test",
			data:JSON.stringify({"src":source,"dst":dest}),
			contentType: 'application/json' 
			})
			.done(function(data) {
				console.log( "success" );
				console.log(data);
				loadResults(data);
			})
			.fail(function() {
				console.log( "error" );
			})
			// .always(function() {
			// 	console.log( "complete" );
			// });
	}

	function findProducts(){
		var source = $("#source option:selected").val() 
		var dest = $("#destination option:selected").val()
		console.log(source);
		console.log(dest);
		getProducts(source,dest);
		
	}
	</script>
</head>

<body>
	<div id="header">
		<div id="view-tut">
			Mesocosmico Recipe Maker
		</div>
	</div>
	
	<div class="wrapper">
		<div id="main">
				<div id="view-tut">
					Source Country
				</div>
				<select id="source">
					<option value="chn">china</option>
					<option value="jpn">japan</option>
					<option value="fra">france</option>
					<option value="nld">netherlands</option>
					<option value="rus">russia</option>
					<option value="mex">mexico</option>
					<option value="ind">india</option>
					<option value="aus">australia</option>
					<option value="bra">brazil</option>
					<option value="tur">turkey</option>
					<option value="nga">nigeria</option>
					<option value="hkg">hong kong</option>
					<option value="isr">israel</option>
					<option value="ken">kenya</option>
					<option value="kor">south korea</option>
					<option value="prk">north korea</option>
				</select>
				<div id="view-tut">
					Destination Country
				</div>
				<select id="destination">
					<option value="chn">china</option>
					<option value="jpn">japan</option>
					<option value="fra">france</option>
					<option value="nld">netherlands</option>
					<option value="rus">russia</option>
					<option value="mex">mexico</option>
					<option value="ind">india</option>
					<option value="aus">australia</option>
					<option value="bra">brazil</option>
					<option value="tur">turkey</option>
					<option value="nga">nigeria</option>
					<option value="hkg">hong kong</option>
					<option value="isr">israel</option>
					<option value="ken">kenya</option>
					<option value="kor">south korea</option>
					<option value="prk">north korea</option>
				</select>
				<button type="button"onclick="findProducts()">Find Traded Products</button>
				<div id="results">
				</div>
			
		</div>
	</div>
	
	<!-- Styles (Demo only) -->
	<style>
/*		* {margin:0;padding:0;}
		a img {border:none;}
		a {text-decoration:none;}
		body {font:400 12px/1.625 "Helvetica Neue", Helvetica, Arial, sans-serif;-webkit-font-smoothing:antialiased;-moz-font-smoothing:antialiased;
		-o-font-smoothing:antialiased;font-smoothing:antialiased;text-rendering:optimizeLegibility;color:#444;background:#F0F0ED;}
		.wrapper {max-width:1000px;width:95%;margin:0 auto;position:relative;}
		#header {overflow:auto;background:#33363C;border-top:5px solid #2F3135;border-bottom:2px solid #04A4CC;}
		#logo {float:left;margin:10px 50px 5px;}
		#logo img {width:80px;height:36px;}
		#view-tut {float:right;font-size:13px;font-weight:900;margin:10px 50px 5px;}
		#view-tut ul {margin:0;}
		#view-tut ul li {display:inline-block;*display:inline;zoom:1;margin:0 5px 0 0;}
		#view-tut ul li a {display:block;padding:5px 10px;background:#04A4CC;color:#FFF;border-radius:20px;}
		#view-tut ul li a:hover {background:#0097CD;}
		#main p {padding:0;margin:10px 0 0;}
		#footer {clear:both;}*/
		
		/* Demo navigation positioning */
		/*nav {position:absolute;top:100px;}*/
	</style>
	
</body>
</html>